---
title: "Правило 14KB: Статика против React-жира"
date: 2025-12-09T05:30:00+03:00
draft: false
description: "Почему первые 14 КБ решают судьбу вашего сайта, как React и SPA превращаются в жир, и почему статический блог на Hugo весом 3.5 КБ побеждает физику."
tags: ["hugo", "react", "performance", "rant", "optimization"]
categories: ["Web", "DevOps", "Opinion"]
---

Современный веб сломан, но проблема не там, где все думают. Дело не в медленном интернете. Дело в физике.

Мы привыкли оценивать сайты в мегабайтах, но настоящая битва за производительность происходит в первых **14 килобайтах**. Это негласное правило, которое определяет, загрузится ваш сайт мгновенно или заставит пользователя смотреть на белый экран.

И в этой битве React-фреймворки, при всей их мощи, проигрывают с разгромным счетом.

### Бойцы на ринге: Bloat против Статики

С одной стороны у нас типичный сайт-блог на Next.js или Gatsby. Даже пустой проект (`create-app`) после сборки весит **150-200 КБ**. Это наш "Bloat" (Жир) — мощный, сложный, но неповоротливый.

С другой стороны — мой блог на Hugo. Это Static Site Generator (SSG). Чтобы узнать его реальный вес, я не стал доверять DevTools, а использовал `curl` — инструмент, который показывает, что на самом деле летит по сети:

```
curl -H "Accept-Encoding: gzip" -so /dev/null -w '%{size_download}\n' https://ziix.ru
```

**3.5 килобайта.** Вся главная страница со стилями, контентом и версткой.

Но почему разница между 3.5 КБ и 150 КБ так критична?

### Правила боя: Физика TCP Slow Start (Правило 14KB)

Когда ваш браузер подключается к серверу, они не знают, насколько хорош канал связи. Поэтому TCP протокол использует алгоритм **"медленного старта"**.

Сервер не выливает на вас весь сайт разом. Он отправляет стартовую "пачку" данных — обычно это **10 TCP-сегментов**, что равняется примерно **14 КБ**.

И тут начинается самое интересное:

1.  **Статический сайт (< 14KB):** Мой блог весом 3.5 КБ полностью умещается в эту первую пачку. Он прилетает за один раунд (RTT), и браузер мгновенно его отрисовывает. **Это нокаут в первом раунде.**

2.  **React-сайт (> 14KB):** 150 КБ не влезают. Сервер отправляет первые 14 КБ, останавливается и ждет ответа от браузера ("ACK, всё получил"). Только потом он увеличивает "окно" и отправляет следующую порцию. Этот пинг-понг создает задержки, которые на мобильных сетях превращаются в секунды ожидания.

### Ловушка "Оптимизации": А как же Lazy Loading?

"Но мы же разбиваем код (code splitting) и используем ленивую загрузку!" — скажет любой React-разработчик.

Давайте будем честны. Это не решение, а иллюзия.

1.  **Непробиваемый минимум:** Чтобы ваш "ленивый" компонент заработал, браузеру сначала нужно загрузить и выполнить сам **runtime Реакта**. Это уже **~40 КБ** в сжатом виде. Вы проиграли битву за 14 КБ, еще даже не начав ее.

2.  **Оплата в рассрочку:** Lazy Loading не убирает "жир", а просто размазывает его по времени. Пользователь все равно скачает сотни килобайт JS — просто не сразу, а по частям, пока кликает по сайту.

3.  **Инженерная дичь:** Вы создаете сложную архитектуру с лоадерами, скелетонами и управлением состоянием гидратации просто для того, чтобы показать статический текст. Вы героически боретесь с проблемой, которую сами себе создали.

### Вердикт

Для сложных веб-приложений React незаменим. Но для блогов, лендингов и контентных сайтов использовать его — значит строить танк для поездки за хлебом.

Стек из **Hugo + Nginx** отдает заранее сгенерированный, чистый HTML. Он не думает, не рендерит, а просто выстреливает в пользователя готовый результат.

Результат — сайт, который уважает законы физики и открывается до того, как пользователь уберет палец с экрана.

Хватит бороться с "белым экраном смерти". Начните уважать своих пользователей. И физику.
