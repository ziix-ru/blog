/* 
   СУПЕР-УНИВЕРСАЛЬНАЯ ШАПКА
   Работает с любой темой автоматически, используя переменные Hugo.
*/

.header {
    position: sticky;
    top: 0;
    z-index: 50;
    margin-bottom: 12px !important;
    background: transparent !important;
    transition: transform 0.25s ease-out;
}

/* 
   ХИТРОСТЬ: Вместо background-color мы используем псевдо-элемент ::before.
   Это позволяет взять цвет темы (var(--theme)) и сделать его полупрозрачным (opacity),
   не ломая прозрачность текста.
*/
.header .nav {
    position: relative; /* Чтобы позиционировать ::before внутри */
    max-width: calc(var(--main-width) + var(--gap) * 2);
    margin: 0 auto;
    padding: 6px 18px;
    border-radius: 0 0 10px 10px;
    border-top: none;
    
    /* Убираем обычный фон */
    background: transparent !important;
    
    /* Размытие */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    
    /* Граница (используем var(--border) от PaperMod - она сама меняется!) */
    border: 1px solid var(--border);
    border-top: none;
    
    overflow: hidden; /* Чтобы фон не вылезал за скругления */
}

/* Полупрозрачная подложка цвета темы */
.header .nav::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: -1; /* Кладем ПОД текст */
    
    /* БЕРЕМ ЦВЕТ ТЕМЫ АВТОМАТИЧЕСКИ */
    background-color: var(--theme);
    
    /* Делаем его полупрозрачным */
    opacity: 0.85; 
}

/* Скрытие при скролле */
.header.header--hidden {
    transform: translateY(-110%);
}

.logo { margin-right: auto; }
#menu { margin-left: auto; }

/* === КОМПАКТНАЯ ГЛАВНАЯ === */

/* Уменьшаем отступ сверху у основного контейнера */
.main {
    margin-top: 20px !important; /* Было больше */
}

/* Настраиваем блок приветствия (first-entry) */
.first-entry {
    min-height: auto !important; /* Убираем растягивание на пол-экрана */
    margin-bottom: 20px !important; /* Отступ до постов */
    padding: 20px !important; /* Внутренние отступы поменьше */
    
    /* Делаем флекс, чтобы контент был компактным */
    display: flex;
    flex-direction: column;
    justify-content: center;
}

/* Уменьшаем заголовок "Привет, я ziix" */
.first-entry h1 {
    margin-top: 0 !important;
    font-size: 28px !important; /* Чуть меньше гигантизма */
}

/* Уменьшаем отступ у текста описания */
.first-entry .entry-content {
    margin: 10px 0 !important;
    font-size: 16px !important;
}

/* Соц иконки покомпактнее */
.first-entry .social-icons {
    margin-top: 10px !important;
}

/* Включаем Grid только для десктопа (ширина > 768px) */
@media screen and (min-width: 768px) {
    /* 
       Находим родителя постов. В PaperMod это <main class="main">.
       Но там лежит и .first-entry (приветствие), и .post-entry (посты), и .pagination.
       CSS Grid тут будет сложно настроить, чтобы приветствие было на всю ширину.
    */
    
    /* 
       ПОПЫТКА С FLEX-WRAP (Псевдо-грид) 
       Это безопаснее для структуры PaperMod
    */
    .main {
        display: flex;
        flex-wrap: wrap;
        gap: 20px; /* Расстояние между карточками */
        align-items: flex-start; /* Чтобы карточки не растягивались по высоте */
    }

    /* Приветствие на всю ширину (100%) */
    .first-entry {
        width: 100%;
        margin-bottom: 0 !important; /* Отступ контролирует gap родителя */
        flex: 0 0 100%;
    }

    /* Посты - по 50% минус половина отступа */
    .post-entry {
        width: calc(50% - 10px); 
        margin-bottom: 0 !important;
        
        /* Делаем карточки одинаковой высоты */
        display: flex;
        flex-direction: column;
        height: 100%; 
        min-height: 280px; /* Чтобы не были сплюснутыми */
    }

    /* Внутри карточки контент растягиваем */
    .post-entry .entry-content {
        flex-grow: 1;
    }

    /* Пагинация (кнопки Next/Prev) на всю ширину */
    .pagination {
        width: 100%;
        flex: 0 0 100%;
        margin-top: 20px;
    }
}
